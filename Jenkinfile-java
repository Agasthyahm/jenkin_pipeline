pipeline{
	agent { label 'node2' }
	environment{
			SONAR_TOKEN = credentials('sonar-token')
}
	stages{
		stage("Source code"){
			steps{
				git branch : 'master', url : 'https://github.com/Agasthyahm/hello-world-war-java.git'
			}
		}

		stage("Build with maven"){
			steps{
				sh ' mvn clean install sonar:sonar -Dsonar.login=${SONAR_TOKEN}'
			}
		}
	}
}
